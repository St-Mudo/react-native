# from HelloWorld
pod deintegrate

# from React Native
RN_DEP_VERSION=nightly HERMES_VERSION=nightly node scripts/ios-prebuild -s
sed -i '' 's/let BUILD_FROM_SOURCE = false/let BUILD_FROM_SOURCE = true/' <filename>
node scripts/swiftpm/create-symlinks.js
node scripts/generate-codegen-artifacts.js -p ../../private/helloworld -t ios -o ../../private/helloworld/ios
node scripts/swiftpm/prepare-app-dependencies-headers.js . ../../private/helloworld/ios ../../private/helloworld/ios/build/generated/ios/ReactAppDependencyProvider codegen
node scripts/swiftpm/prepare-app-dependencies-headers.js . ../../private/helloworld/ios ../../private/helloworld/ios/build/generated/ios/ReactCodegen react-native
node scripts/swiftpm/prepare-app-dependencies-headers.js . ../../private/helloworld/ios ../../private/helloworld/ios/build/generated/ios/ReactCodegen third-party-dependencies

# Fix the REACT_NATIVE_PATH in Xcode project.
sed -i '' 's|REACT_NATIVE_PATH = "${PODS_ROOT}/../../../../packages/react-native";|REACT_NATIVE_PATH = "${PROJECT_DIR}/../../../packages/react-native";|' ../../private/helloworld/ios/HelloWorld.xcodeproj/project.pbxproj
